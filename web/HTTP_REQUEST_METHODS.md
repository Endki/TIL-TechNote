# HTTP 요청 메서드

#### 개요

----

HTTP는 요청 메서드를 정의하여, 주어진 리소스에 수행하길 원하는 행동을 나타낸다.

간혹 요청 메서드를 "HTTP 동사" 라고 부르기도 한다.

각각의 메서드는 서로 다른 의미를 구현하지만, 일부 기능은 메서드 집합 간에 공유하기도 한다.

###### 예를들면, 응답 메서드는 <u>안전</u>하거나, <u>캐시가능</u>하거나, <u>멱등성</u>을 가질 수 있다.

<details close>  <summary> 안전(SAFE) </summary>
	서버의 상태를 변경하지 않는 메서드를 '안전' 메서드라고 한다.<br>
	즉, 읽기 전용 작업으로 이어지는 메서드들을 말한다. (GET,HEAD,OPTIONS 등)<br>
    모든 안전한 방법은 멱등적이지만, 모든 멱등 방법이 안전한 것은 아니다.(PUT,DELETE는 멱등적이지만 안전하지 않음) <br><br>
    안전한 방법이 읽기 전용 의미를 갖고있다고는 해도 서버는 상태를 변경할 수 있다.
예를 들면 통계를 기록하는 등의 행위를 할 수 있다. <br>
다만, 중요한 점은 안전한 메서드를 호출함으로써 클라이언트가 서버 변경을 요청하지 않으므로 서버에 불필요한 부담을 주지 않는다는 것에 있다.<br>
이를 통해 pre-fetching 같은 것을 위험없이 가져올 수 있다.<br>
웹 크롤링 또한 SAFE에 의존한다.<br><br>
그렇다고 해서 안전한 방법이 정적 파일만 제공할 필요는 없다. <br>
서버는 생성 스크립트가 안전을 보장하는 한 안전한 방법에 대한 답변을 즉성에서 생성할 수 있다.<br><br>
예시 : SAFE - GET / NON-SAFE - POST / 멱등 but NON-SAFE - DELETE
</details>

<details close> <summary> 캐시가능(Cacheable) </summary>
 캐시 응답은 서버에 새로운 요청을 저장, 검색하고 나중에 사용할 수 있도록 저장되는 캐시 할 수 있는 HTTP 응답이다. <br><br>
 <h6>제약조건</h6><br>
 - GET 또는 HEAD 메서드 <br>
 - 상태코드가 다음과 같을 것 (200 , 203 , 204 , 206 , 300 , 301 , 404 , 405 , 410 , 414 , 501)<br>
 - 캐시를 방해하는 해더 사용 금지(Cache-Control)<br><br></details>

<details close> <summary>  멱등성  </summary>
동일한 요청을 한 번 보내는 것과 여러번 연속으로 보내는 것이 같은 효과를 지니고, <br>서버의 상태도 동일하게 남을 때, 해당 HTTP 메서드가 멱등성을 가지고 있다고 말한다.<br>
멱등성 메서드에는 통계기록 등을 제외하면 어떠한 Side Effect가 존재해서는 안된다.<br>
올바르게 구현한 경우 GET, HEAD, PUT, DELETE 메서드는 멱등성을 가지며,<br>
POST 메서드는 그렇지 않는다.<br><br>
다만, 각 요청에 응답 코드는 다를 수 있다. <br>
첫번째, DELETE요청이 200을 반환한다면, 이후에는 404를 반환할 것이다.<br><br>
멱등성을 갖도록 DELETE 구현하기 위해서는 <br>
"목록의 마지막 항목 제거" 기능을 구현해서는 안된다는 것<br>
구현에 따라 멱등성 제약을 어길 수 도 있다.
</details>
##### 

#### 메서드 종류

----

- GET
  특정한 리소스를 가져오도록 요청한다. / GET 요청은 데이터를 가져올 때만 사용해야 한다.

  | 요청에 본문 존재               | 아니오 |
  | ------------------------------ | ------ |
  | **성공 응답에 대한 본문 존재** | **예** |
  | **안전함(SAFE)**               | **예** |
  | **멱등성**                     | **예** |
  | **캐시 가능(Cacheable)**       | **예** |
  | **HTML 양식에서 사용 가능**    | **예** |

  
  
- HEAD
  특정 리소스를 GET 메서드로 요청했을 때, 돌아올 헤더를 요청한다.
  응답이 본문을 가져서는 안되며, 있더라도 무시해야한다. 

  | 요청에 본문 존재               | 아니오     |
  | ------------------------------ | ---------- |
  | **성공 응답에 대한 본문 존재** | **아니오** |
  | **안전함(SAFE)**               | **예**     |
  | **멱등성**                     | **예**     |
  | **캐시 가능(Cacheable)**       | **예**     |
  | **HTML 양식에서 사용 가능**    | **아니오** |

  

- POST
  POST 메서드는 서버로 데이터를 전송한다. 본문의 유형은 Content-Type 헤더로 나타낸다.
  PUT과 POST의 차이는 멱등성으로, PUT은 멱등성을 가진다. 

  | 요청에 본문 존재               | 예                        |
  | ------------------------------ | ------------------------- |
  | **성공 응답에 대한 본문 존재** | **예**                    |
  | **안전함(SAFE)**               | **아니오**                |
  | **멱등성**                     | **아니오**                |
  | **캐시 가능(Cacheable)**       | **신선도(?) 정보 포함시** |
  | **HTML 양식에서 사용 가능**    | **예**                    |

  
  
- PUT

  새로운 리소스를 생성하거나, 대상 리소스를 나타내는 데이터를 대체한다.

  POST와의 차이는 멱등성으로 PUT는 멱등성을 가진다.

  | 요청에 본문 존재               | 예         |
  | ------------------------------ | ---------- |
  | **성공 응답에 대한 본문 존재** | **아니오** |
  | **안전함(SAFE)**               | **아니오** |
  | **멱등성**                     | **예**     |
  | **캐시 가능(Cacheable)**       | **아니오** |
  | **HTML 양식에서 사용 가능**    | **아니오** |

  

- DELETE
  지정한 리소스를 삭제한다.

  | 요청에 본문 존재               | May        |
  | ------------------------------ | ---------- |
  | **성공 응답에 대한 본문 존재** | **May**    |
  | **안전함(SAFE)**               | **아니오** |
  | **멱등성**                     | **예**     |
  | **캐시 가능(Cacheable)**       | **아니오** |
  | **HTML 양식에서 사용 가능**    | **아니오** |

  
  
- CONNECT

  요청한 리소스에 대해 양방향 연결을 시작하는 메소드, 터널을 열기위해서 사용될 수 있다.

  예를 들어, SSL을 사용하는 웹사이트에 접속하는데 사용될 수 있다. 
  클라이언트는 원하는 목적지와의 TCP 연결을 HTTP프록시 서버에 요청한다. 
  그러면 서버는 클라이언트를 대신하여 연결의 생성을 진행한다.
  한번 서버에 의해 연결이 수립되면, 프록시 서버는 클라이언트에 오고가는 TCP 스트림을 계속해서 프록시 한다.

  hop-by-hop 메서드 이다.

  | 요청에 본문 존재               | 아니오     |
  | ------------------------------ | ---------- |
  | **성공 응답에 대한 본문 존재** | **예**     |
  | **안전함(SAFE)**               | **아니오** |
  | **멱등성**                     | **아니오** |
  | **캐시 가능(Cacheable)**       | **아니오** |
  | **HTML 양식에서 사용 가능**    | **아니오** |

  
  
- OPTIONS

  목표 리소스와의 통신 옵션을 설명하기 위해 사용된다.
  클라이언트는 OPTIONS 메서드의 URL을 특정지을 수 있으면 * 를 통해 서버 전체를 선택할 수 있다.

  | 요청에 본문 존재               | 아니오     |
  | ------------------------------ | ---------- |
  | **성공 응답에 대한 본문 존재** | **예**     |
  | **안전함(SAFE)**               | **예**     |
  | **멱등성**                     | **예**     |
  | **캐시 가능(Cacheable)**       | **아니오** |
  | **HTML 양식에서 사용 가능**    | **아니오** |

  

- TRACE

  대상 자원의 경로를 따라서 메세지 loop-back 테스트를 수행한다. /유용한 디버그 메커니즘 제공

  | 요청에 본문 존재               | 아니오     |
  | ------------------------------ | ---------- |
  | **성공 응답에 대한 본문 존재** | **아니오** |
  | **안전함(SAFE)**               | **예**     |
  | **멱등성**                     | **예**     |
  | **캐시 가능(Cacheable)**       | **아니오** |
  | **HTML 양식에서 사용 가능**    | **아니오** |

  

- PATCH

  리소스의 부분적인 수정을 할 때 사용한다.

  PUT 메소드는 문서 전체의 완전한 교체만을 허용한다. 하지만 PATCH 메소드는 PUT 메소드와 달리 멱등성을 
  가지지 않는다.

  서버가 PATCH를 지원하는지 알 수 있게끔 하기 위해, 서버는 Allow 리스트 혹은 Access-Control-Allow-Methods 응답 헤더를 통해 명시할 수 있다. / Accept-Patch의 존재 유무로도 확인 가능

  

  | 요청에 본문 존재               | 예         |
  | ------------------------------ | ---------- |
  | **성공 응답에 대한 본문 존재** | **예**     |
  | **안전함(SAFE)**               | **아니오** |
  | **멱등성**                     | **아니오** |
  | **캐시 가능(Cacheable)**       | **아니오** |
  | **HTML 양식에서 사용 가능**    | **아니오** |



#### 요약

---

| Methods | infomation                                                   |
| ------- | ------------------------------------------------------------ |
| GET     | 특정 리소스의 표시를 요청 (데이터를 받기만 한다.)            |
| HEAD    | GET메서드의 요청과 동일한 응답 요청 (but. Body가 없다.)      |
| POST    | 서버로 데이터를 전송 ( 서버 상태의 변화, 부작용 발생 ) / 리소스 생성 |
| PUT     | 새로운 리소스를 생성, 또는 리소스를 수정 ( 없으면 생성, 있으면 수정 ) |
| DELETE  | 특정 리소스를 삭제                                           |
| CONNECT | 목적 리소스로 식별되는 서버로의 터널을 연결                  |
| OPTIONS | 목적 리소스의 통신을 설정                                    |
| TRACE   | 목적 리소스의 경로를 따라서 loop-back 테스트                 |
| PATCH   | 리소스의 부분만 수정                                         |





##### 출처

---

MDN Web Docs ( https://developer.mozilla.org/ko/docs/Web/HTTP/Methods )
